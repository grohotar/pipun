<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {{ $siteTitle := .Site.Title }}
  {{ $pageTitle := .Title }}
  {{ $seoTitle := .Params.seoTitle }}
  {{ $metaTitle := "" }}
  {{ if .IsHome }}
    {{ if $seoTitle }}
      {{ $metaTitle = $seoTitle }}
    {{ else }}
      {{ $metaTitle = $siteTitle }}
    {{ end }}
  {{ else }}
    {{ if $seoTitle }}
      {{ $metaTitle = $seoTitle }}
    {{ else if $siteTitle }}
      {{ $metaTitle = printf "%s | %s" $pageTitle $siteTitle }}
    {{ else }}
      {{ $metaTitle = $pageTitle }}
    {{ end }}
  {{ end }}

  {{ $seoDescription := .Params.seoDescription }}
  {{ $metaDescription := "" }}
  {{ if $seoDescription }}
    {{ $metaDescription = $seoDescription }}
  {{ else if .Description }}
    {{ $metaDescription = .Description }}
  {{ else }}
    {{ $metaDescription = .Site.Params.description }}
  {{ end }}

  {{ $seoKeywords := .Params.seoKeywords }}
  {{ $metaKeywords := "" }}
  {{ if $seoKeywords }}
    {{ $metaKeywords = $seoKeywords }}
  {{ else if .Params.keywords }}
    {{ $metaKeywords = .Params.keywords }}
  {{ else }}
    {{ $metaKeywords = .Site.Params.keywords }}
  {{ end }}

  {{ $metaImage := or .Params.image .Site.Params.image }}
  
  <!-- Primary Meta Tags -->
  <title>{{ $metaTitle }}</title>
  <meta name="title" content="{{ $metaTitle }}">
  <meta name="description" content="{{ $metaDescription }}">
  <meta name="keywords" content="{{ $metaKeywords }}">
  <meta name="author" content="{{ .Site.Params.author }}">
  <meta name="robots" content="{{ if .Params.robots }}{{ .Params.robots }}{{ else }}index, follow{{ end }}">
  <link rel="canonical" href="{{ .Permalink }}">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ if eq .Section "blog" }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:title" content="{{ $metaTitle }}">
  <meta property="og:description" content="{{ $metaDescription }}">
  <meta property="og:image" content="{{ $metaImage | absURL }}">
  <meta property="og:image:alt" content="{{ $metaTitle }}">
  <meta property="og:locale" content="ru_RU">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  {{ if eq .Section "blog" }}
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
  <meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
  {{ end }}
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="{{ .Permalink }}">
  <meta property="twitter:title" content="{{ $metaTitle }}">
  <meta property="twitter:description" content="{{ $metaDescription }}">
  <meta property="twitter:image" content="{{ $metaImage | absURL }}">
  <meta name="twitter:image:alt" content="{{ $metaTitle }}">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png">

  {{ with .OutputFormats.Get "RSS" }}
  <link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .RelPermalink }}">
  {{ end }}
  
  <!-- Styles -->
  {{ $styles := resources.Get "scss/main.scss" | css.Sass | resources.Minify | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}" crossorigin="anonymous">
  
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
  (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106054588', 'ym');ym(106054588, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", referrer: document.referrer, url: location.href, accurateTrackBounce:true, trackLinks:true});
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/106054588" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->
  
  <!-- Schema.org structured data -->
  {{ if eq .Section "locations" }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "{{ .Title }}",
    "description": "{{ $metaDescription }}",
    "brand": {
      "@type": "Brand",
      "name": "Pipun VPN"
    },
    "offers": {
      "@type": "AggregateOffer",
      "priceCurrency": "RUB",
      "lowPrice": "149",
      "highPrice": "2689",
      "offerCount": "5"
    }
  }
  </script>
  {{ else if eq .Section "blog" }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "{{ .Title }}",
    "description": "{{ $metaDescription }}",
    "image": "{{ $metaImage | absURL }}",
    "author": {
      "@type": "Organization",
      "name": "{{ .Site.Params.author }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ .Site.Params.author }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ .Site.Params.image | absURL }}"
      }
    },
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ .Permalink }}"
    }
  }
  </script>
  {{ else }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Pipun VPN",
    "url": "{{ .Site.BaseURL }}",
    "logo": "{{ .Site.Params.image | absURL }}",
    "description": "{{ .Site.Params.description }}",
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Customer Support",
      "url": "https://t.me/pipunhelper"
    },
    "sameAs": [
      "https://t.me/pipun_bot"
    ]
  }
  </script>
  {{ end }}

  {{ if not .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Главная",
        "item": "{{ .Site.BaseURL }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ if .Params.breadcrumb }}{{ .Params.breadcrumb }}{{ else }}{{ .Title }}{{ end }}",
        "item": "{{ .Permalink }}"
      }
    ]
  }
  </script>
  {{ end }}
</head>
<body>
  {{ block "main" . }}{{ end }}
  {{ partial "footer.html" . }}
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.170.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="/js/main.js"></script>
</body>
</html>
